<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css"></link>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
var restUrl = "https://script.google.com/macros/s/AKfycbwXjtrsjyJKwBvG3GpW1q_KT-WHLgD-ciQV3tpwTBcPGRmtoqcj/exec";
var counter=0;
$(document).ready(function() {
	
	setTile();
	
	setInterval(function(){
		counter++;
	    loadTiles(counter)
	}, 300000);
});

function setTile() {
	$.getJSON(restUrl, function(data) {
		$.each( data, function( key, val ) {
			$("<div id='"+val.name+"' class='"+val.type+"'>").appendTo("body");
		});
	});
	loadTiles();
}
function loadTiles() {
	$.getJSON(restUrl, function(data) {
		$.each( data, function( key, val ) {
			if(counter%val.refreshratesec == 0) {
				var insidename = val.name+'inside';
				$("#"+val.name+"").html('<object id='+insidename+' data="'+val.url+'">');
				$("#"+insidename).width($("#"+insidename).parent().width());
				$("#"+insidename).height($("#"+insidename).parent().height());
			}
		});
	});
}
</script>
</head>
<body>
	<div id="header">Kopfzeile</div>
	<div id="settings"></div>
	
</body>
</html>